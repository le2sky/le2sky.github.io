<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.e53586a225ffdde20c86.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}</style><meta name="generator" content="Gatsby 4.2.0"/><title data-react-helmet="true">Pipes-and-Filters 디자인 패턴</title><meta data-react-helmet="true" name="description" content="NestJs를 통해 파이프-필터 패턴에 대해 알아보기!"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1.0"/><meta data-react-helmet="true" http-equiv="Content-Type" content="text/html;charset=UTF-8"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="Pipes-and-Filters 디자인 패턴"/><meta data-react-helmet="true" property="og:description" content="NestJs를 통해 파이프-필터 패턴에 대해 알아보기!"/><meta data-react-helmet="true" property="og:image" content="/static/fd357e129b32db7aff6e18ee48813f75/nest.png"/><meta data-react-helmet="true" property="og:url"/><meta data-react-helmet="true" property="og:site_name" content="Pipes-and-Filters 디자인 패턴"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="Pipes-and-Filters 디자인 패턴"/><meta data-react-helmet="true" name="twitter:description" content="NestJs를 통해 파이프-필터 패턴에 대해 알아보기!"/><meta data-react-helmet="true" name="twitter:image" content="/static/fd357e129b32db7aff6e18ee48813f75/nest.png"/><meta data-react-helmet="true" name="twitter:site" content="@le2sky"/><meta data-react-helmet="true" name="twitter:creator" content="@le2sky"/><meta data-react-helmet="true" name="google-site-verification" content="5xXRZrCZS3S9PVEAVjys_iHa9OVLogd5xf7A2R8BswM"/><meta data-react-helmet="true" name="naver-site-verification" content="5357dfe02506442121b9a0e97c725828d62c62ad"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="canonical" href="https://le2sky.github.io/post/211129/pipes-and-filters/" data-baseprotocol="https:" data-basehost="le2sky.github.io"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link as="script" rel="preload" href="/webpack-runtime-18ba49f24d528c3258f3.js"/><link as="script" rel="preload" href="/framework-58b14054e5856b4c6d2c.js"/><link as="script" rel="preload" href="/app-8b49bd8b852b57b72c6c.js"/><link as="script" rel="preload" href="/cb1608f2-3d819ef7bda07be68cd1.js"/><link as="script" rel="preload" href="/be649dec24c0af8239ea629002f7bb6d0ff320b3-fb50e8e5d3de781548ac.js"/><link as="script" rel="preload" href="/d0dcf9c1039535d44ee74defc829dfbf62dac3c5-fd0ef239f4294183c8d0.js"/><link as="script" rel="preload" href="/component---src-templates-post-template-tsx-85872c364c0ae9140867.js"/><link as="fetch" rel="preload" href="/page-data/post/211129/pipes-and-filters/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css 1t2p1xb">.css-1t2p1xb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;width:100%;}</style><main class="css-1t2p1xb exp4mvc0"><style data-emotion="css-global 8f9hf0">@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100&display=swap');*{padding:0;margin:0;box-sizing:border-box;font-family:'Noto Sans KR',sans-serif;}html,body,#___gatsby{height:100%;}html::-webkit-scrollbar{display:none;}a,a:hover{color:inherit;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}</style><style data-emotion="css ho1qnd">.css-ho1qnd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}</style><header class="css-ho1qnd ebdy7yn1"><style data-emotion="css 1wf493t">.css-1wf493t{text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;overflow:visible;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-1wf493t:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.css-1wf493t:hover{background-color:transparent;}}.css-1wf493t.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}</style><style data-emotion="css 1yxmbwk">.css-1yxmbwk{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;overflow:visible;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-1yxmbwk::-moz-focus-inner{border-style:none;}.css-1yxmbwk.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-1yxmbwk{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-1yxmbwk:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.css-1yxmbwk:hover{background-color:transparent;}}.css-1yxmbwk.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}</style><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeMedium css-1yxmbwk" tabindex="0" type="button"><style data-emotion="css vubbuv">.css-vubbuv{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv" focusable="false" viewBox="0 0 24 24" aria-hidden="true" data-testid="MenuIcon"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></button><style data-emotion="css a3xyjy">.css-a3xyjy{z-index:1200;}</style><style data-emotion="css 1j3l1ee">.css-1j3l1ee{margin-left:auto;margin-right:10px;}</style><div class="css-1j3l1ee ebdy7yn0"><a class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeMedium css-1yxmbwk" tabindex="0" href="https://github.com/le2sky"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv" focusable="false" viewBox="0 0 24 24" aria-hidden="true" data-testid="GitHubIcon"><path d="M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"></path></svg></a><a class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeMedium css-1yxmbwk" tabindex="0" href="https://www.instagram.com/lee.___.sky/"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv" focusable="false" viewBox="0 0 24 24" aria-hidden="true" data-testid="InstagramIcon"><path d="M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8 1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3z"></path></svg></a><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeMedium css-1yxmbwk" tabindex="0" type="button"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv" focusable="false" viewBox="0 0 24 24" aria-hidden="true" data-testid="MailIcon"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"></path></svg></button></div></header><style data-emotion="css 16cz9yp">.css-16cz9yp{position:relative;width:100%;height:400px;}@media (max-width: 768px){.css-16cz9yp{height:300px;}}</style><div class="css-16cz9yp e1svtkps1"><style data-emotion="css 1bjn9yo">.css-1bjn9yo{z-index:-1;width:100%;height:400px;object-fit:cover;-webkit-filter:brightness(0.25);filter:brightness(0.25);}@media (max-width: 768px){.css-1bjn9yo{height:300px;}}</style><div data-gatsby-image-wrapper="" style="position:absolute" class="gatsby-image-wrapper gatsby-image-wrapper-constrained css-1bjn9yo e1svtkps0"><div style="max-width:259px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;194&#x27; width=&#x27;259&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#181818;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/static/fd357e129b32db7aff6e18ee48813f75/88858/nest.webp 65w,/static/fd357e129b32db7aff6e18ee48813f75/c1c7e/nest.webp 130w,/static/fd357e129b32db7aff6e18ee48813f75/06a49/nest.webp 259w" sizes="(min-width: 259px) 259px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 259px) 259px, 100vw" decoding="async" loading="lazy" data-src="/static/fd357e129b32db7aff6e18ee48813f75/16365/nest.png" data-srcset="/static/fd357e129b32db7aff6e18ee48813f75/76184/nest.png 65w,/static/fd357e129b32db7aff6e18ee48813f75/8906b/nest.png 130w,/static/fd357e129b32db7aff6e18ee48813f75/16365/nest.png 259w" alt="thumbnail"/></picture><noscript><picture><source type="image/webp" srcSet="/static/fd357e129b32db7aff6e18ee48813f75/88858/nest.webp 65w,/static/fd357e129b32db7aff6e18ee48813f75/c1c7e/nest.webp 130w,/static/fd357e129b32db7aff6e18ee48813f75/06a49/nest.webp 259w" sizes="(min-width: 259px) 259px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 259px) 259px, 100vw" decoding="async" loading="lazy" src="/static/fd357e129b32db7aff6e18ee48813f75/16365/nest.png" srcSet="/static/fd357e129b32db7aff6e18ee48813f75/76184/nest.png 65w,/static/fd357e129b32db7aff6e18ee48813f75/8906b/nest.png 130w,/static/fd357e129b32db7aff6e18ee48813f75/16365/nest.png 259w" alt="thumbnail"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1)}}</script></div><style data-emotion="css m1156n">.css-m1156n{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;height:100%;margin:0 auto;padding:60px 0;color:#ffffff;}@media (max-width: 768px){.css-m1156n{width:100%;padding:40px 20px;}}</style><div class="css-m1156n e1pzdos83"><style data-emotion="css gywgo7">.css-gywgo7{display:grid;place-items:center;width:40px;height:40px;border-radius:50%;background:#ffffff;color:#000000;font-size:22px;cursor:pointer;box-shadow:0 0 10px rgba(0, 0, 0, 0.3);}@media (max-width: 768px){.css-gywgo7{width:30px;height:30px;font-size:18px;}}</style><div class="css-gywgo7 e1pzdos82"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-left" class="svg-inline--fa fa-arrow-left fa-w-14 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"></path></svg></div><style data-emotion="css gn4qtp">.css-gn4qtp{display:-webkit-box;overflow:hidden;overflow-wrap:break-word;margin-top:auto;text-overflow:ellipsis;white-space:normal;-webkit-line-clamp:2;-webkit-box-orient:vertical;font-size:45px;font-weight:800;}@media (max-width: 768px){.css-gn4qtp{font-size:30px;}}</style><div class="css-gn4qtp e1pzdos81">Pipes-and-Filters 디자인 패턴</div><style data-emotion="css 3gcnt2">.css-3gcnt2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;font-size:18px;font-weight:700;}@media (max-width: 768px){.css-3gcnt2{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;font-size:15px;font-weight:400;}}</style><div class="css-3gcnt2 e1pzdos80"><div>Backend / Nest / 디자인 패턴</div><div>2021.11.29.</div></div></div></div><style data-emotion="css bsp22u">.css-bsp22u{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;margin:0 auto;padding:50px 0;word-break:break-all;line-height:1.6;font-size:18px;font-weight:400;}.css-bsp22u p{padding:3px 0;}.css-bsp22u h1,.css-bsp22u h2,.css-bsp22u h3{font-weight:800;margin-bottom:30px;}.css-bsp22u *+h1,.css-bsp22u *+h2,.css-bsp22u *+h3{margin-top:30px;}.css-bsp22u hr+h1,.css-bsp22u hr+h2,.css-bsp22u hr+h3{margin-top:0;}.css-bsp22u h1{font-size:32px;}.css-bsp22u h2{font-size:27px;}.css-bsp22u h3{font-size:22px;}.css-bsp22u blockquote{margin:15px 0;padding:5px 30px;border-left:3px solid #000000;font-weight:800;}.css-bsp22u ol,.css-bsp22u ul{margin-left:20px;padding:10px 0;}.css-bsp22u hr{border:1px solid #000000;margin:100px 0;}.css-bsp22u a{color:#4263eb;-webkit-text-decoration:underline;text-decoration:underline;}.css-bsp22u pre[class*='language-']{margin:30px 0;padding:15px;font-size:15px;}.css-bsp22u pre[class*='language-']::-webkit-scrollbar-thumb{background:rgba(255, 255, 255, 0.5);border-radius:3px;}.css-bsp22u code[class*='language-'],.css-bsp22u pre[class*='language-']{tab-size:2;}@media (max-width: 768px){.css-bsp22u{width:100%;padding:80px 20px;line-height:1.6;font-size:14px;}.css-bsp22u h1{font-size:23px;}.css-bsp22u h2{font-size:20px;}.css-bsp22u h3{font-size:17px;}.css-bsp22u img{width:100%;}.css-bsp22u hr{margin:50px 0;}}</style><div class="css-bsp22u ehca5eo0"><h3>1. 모놀리식 모듈 처리 패턴의 문제</h3>
<p>어플리케이션은 처리되는 정보의 복잡도가 서로 다른 여러 작업을 수행해야 한다. 간단하면서도 유연성 없는 어플리케이션 구현 방식은 이 처리를 모놀리식 모듈로 수행한다.
아래 사진은 두 가지 데이터를 받아서 처리하는 모놀리식 방법이다.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; ">
      <a class="gatsby-resp-image-link" href="/static/dda1687b9f2689cc895a5730875cb945/c0214/monol.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 75.52083333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAABzklEQVQoz41T24rbMBD1//9Ey+5L9zMagvNUwm7KJr43gWRjy1ZiybauM1PsZFvYeqGHgwSS5qYzE9AcPOCRq82pixr7eu7KVjvAf58FSDRDRCDiUn5fLkU/eJpHMHuqPXqiK+dPT99403gi48fIH6IHUrvrYJOqS8qRpdCtcs3giChJ08PhkCQJEbXGWw83mz8uAmVBWdDuLwcDrfGAmGVZXhRpmt6MK2nqztyLR5xJGye/rGlKfs2zLM/zOI4tUWf99k1mrK+k0e6eQsAY2+2iNE3jJIniOIric1kKIYDIADkig+SmYMYhIjqk7MyPFbNIwXq9DsNwuVyGYbharRaLRRRFRKSsNx6GadUW/JQnwLhtXp4fv34xSAEiCiGqquITGGNCtOeyOnC1OXavpf55kseLstNvA5InOl365/xNwUzNI7pOnlnNZf/j+aUdtJ+Uv11pB/uLbjQ4/ERnRyQG1dT148NDU486d8ZHZxmVHZPG+btYQW+8VC6r+pz1ed0zaXrjL2rUOcuyoijuOmtf1APv7Ycm8VJ7odyNUjuhPH83/rXf33TuLCD+X3saQEsU7XZpkuy2W0tkYa49PxkM0kDKgfYwODAwPxi/AZ+VXW+uOxI8AAAAAElFTkSuQmCC'); background-size: cover; display: block;"></span>
  <picture>
          <source srcset="/static/dda1687b9f2689cc895a5730875cb945/a59e9/monol.webp 192w,
/static/dda1687b9f2689cc895a5730875cb945/0ca9f/monol.webp 384w,
/static/dda1687b9f2689cc895a5730875cb945/dc9b9/monol.webp 768w,
/static/dda1687b9f2689cc895a5730875cb945/c6463/monol.webp 796w" sizes="(max-width: 768px) 100vw, 768px" type="image/webp">
          <source srcset="/static/dda1687b9f2689cc895a5730875cb945/3b721/monol.png 192w,
/static/dda1687b9f2689cc895a5730875cb945/66595/monol.png 384w,
/static/dda1687b9f2689cc895a5730875cb945/fe486/monol.png 768w,
/static/dda1687b9f2689cc895a5730875cb945/c0214/monol.png 796w" sizes="(max-width: 768px) 100vw, 768px" type="image/png">
          <img class="gatsby-resp-image-image" src="/static/dda1687b9f2689cc895a5730875cb945/fe486/monol.png" alt="monol" title="monol" loading="lazy" decoding="async" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;">
        </picture>
  </a>
    </span></img></p>
<p>모놀리식 모듈이 수행하는 작업 일부는 기능적인 측면에서 아주 유사하지만 서로 다르게 설계되어 있다. 작업을 구현하는 코드는 모듈 내에 밀접하게 결합 되어 있으며,
재사용, 확장성을 거의 고려하지 않고 개발되었다. 모듈 처리 과정을 재배치하거나, 나중에 재사용하기에 어려움이 생긴다. 이러한 문제점의 해결 방법으로 <strong>파이프-필터 패턴</strong>
을 사용할 수 있다.</p>
<h3>2. 파이프-필터 패턴이란?</h3>
<p>파이프-필터 패턴은 데이터 스트림 절차의 각 단계를 필터 컴포넌트로 캡슐화하여 파이프를 통해 데이터를 전송하는 패턴이다.</p>
<blockquote>
<p>쉽게말해, 받아온 데이터를 처리할때, 특수한 관(파이프=필터로 구성되어 있음)에 넣어 캡슐화하고 비즈니스 로직에 전달하는 것이다.</p>
</blockquote>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; ">
      <a class="gatsby-resp-image-link" href="/static/c5850d12ce8ac45846e1bcebf45b9096/50208/pipes-and-filters-solution.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.479166666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWklEQVQoz42Q227bMAyG/f5PlpstSec0aOPMs+JEtmVLsk62TuTgDB16tY4gCQLkB5J/cXroA5HCeOOWbhivdbP4+OiGnw1xa6A9q5ubXXw/Tte6sT6nDDHBGnMGKNQSuQ3DvAgpD8djdb1a5wi5vV8qY92tvV+qSmlDu+7t7X2bVL4azKU3IeYCNwNE7NiojEHECJAA/3rMz/z0DAiAg/JL3JACAWJKSik+TfgfBoiT9ZTPHrAghOx2u7qutwZ8RQIExImLw/dvLuaCc77f7z9g+HJzQmTalzdhI2w/55ysMYyxfx67hfXJhdzpSHWIgIWwQZiA2zFy5BIQ01Ow+Emz/FFQuZ7uquVLzk/BzlTvydxLNyt1OL78KEvrXF3/Or2ejbVNQ06vZ6VNe3+UZSlcZNr/ITc4Z4gZhPXaOi4V7ZnzoR+nlnZu9YyLO+3Msk5ybh/U+PRZ198hSz1si4m/gQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"></span>
  <picture>
          <source srcset="/static/c5850d12ce8ac45846e1bcebf45b9096/a59e9/pipes-and-filters-solution.webp 192w,
/static/c5850d12ce8ac45846e1bcebf45b9096/0ca9f/pipes-and-filters-solution.webp 384w,
/static/c5850d12ce8ac45846e1bcebf45b9096/dc9b9/pipes-and-filters-solution.webp 768w,
/static/c5850d12ce8ac45846e1bcebf45b9096/1d2dc/pipes-and-filters-solution.webp 798w" sizes="(max-width: 768px) 100vw, 768px" type="image/webp">
          <source srcset="/static/c5850d12ce8ac45846e1bcebf45b9096/3b721/pipes-and-filters-solution.png 192w,
/static/c5850d12ce8ac45846e1bcebf45b9096/66595/pipes-and-filters-solution.png 384w,
/static/c5850d12ce8ac45846e1bcebf45b9096/fe486/pipes-and-filters-solution.png 768w,
/static/c5850d12ce8ac45846e1bcebf45b9096/50208/pipes-and-filters-solution.png 798w" sizes="(max-width: 768px) 100vw, 768px" type="image/png">
          <img class="gatsby-resp-image-image" src="/static/c5850d12ce8ac45846e1bcebf45b9096/fe486/pipes-and-filters-solution.png" alt="pipes and filters solution" title="pipes and filters solution" loading="lazy" decoding="async" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;">
        </picture>
  </a>
    </span></img></p>
<p>우선 나는 이 그림을 처음봤을 때,<strong>위 그림에서 필터는 톱니바퀴(TASK)이고 파이프는 필터의 직렬 구성</strong>이라고 생각했다.<br><br>
각 스트림에 필요한 처리를 각각 단일 작업을 수행하는 일력의 독립 구성 요소(또는 필터)로 나눈다. 각 구성 요소가 받아서 보내는 데이터의 형식을 표준화하면, 이 필터를 하나의
파이프 라인으로 결합할 수 있다. 이렇게 하면 코드 중복을 방지할 수 있고, 구성 요소를 제거, 대체, 통합하는게 쉬워진다. <br><br></p>
<p><strong>단일 요청을 처리하는 데 소요되는 시간은 파이프라인에서 가장 느린 필터의 속도에 좌우된다.</strong> 한 개 이상의 필터로 인해(특히 특정 데이터 원본의 스트림에서 대량의 요청이 나타날 때) 병목현상이 발생할
수 있다. 파이프라인 구조의 주요장점은 느린 필터의 병렬 인스턴스를 실행할 수 있어 시스템이 부하를 분배하고 처리량을 개선할 수 있다는 것이다.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; ">
      <a class="gatsby-resp-image-link" href="/static/1e7fdbe8433418d9a52ee466a9dbfc02/809bd/pipes-and-filters-load-balancing.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 24.479166666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAzElEQVQY022PzW6EMBCDef9HAwmpBxbR5ERQID9kdliIWDJkKjXVnuqD5U++2BUz55yZWWvdtu0Hi0ruuk5K+cGbmX7bStj9ne4QVutcCAERAYCI7vtOKV3X5Zyz1iLiuq7HfhCze+K3lK+Lqse8u+e+LPM0TcMwIKIQoq5rAGiaxhjjvRdCKKWMMXo2LpIJ29dDnBdVZR4ALMuitT6OAxFjjEQUY0wpAcA4jt77bXud58nMLtLgz51ylfPfE2tt3/f/fpZSKqUKlq74D5A2G4KY9v3NAAAAAElFTkSuQmCC'); background-size: cover; display: block;"></span>
  <picture>
          <source srcset="/static/1e7fdbe8433418d9a52ee466a9dbfc02/a59e9/pipes-and-filters-load-balancing.webp 192w,
/static/1e7fdbe8433418d9a52ee466a9dbfc02/0ca9f/pipes-and-filters-load-balancing.webp 384w,
/static/1e7fdbe8433418d9a52ee466a9dbfc02/dc9b9/pipes-and-filters-load-balancing.webp 768w,
/static/1e7fdbe8433418d9a52ee466a9dbfc02/dfad5/pipes-and-filters-load-balancing.webp 821w" sizes="(max-width: 768px) 100vw, 768px" type="image/webp">
          <source srcset="/static/1e7fdbe8433418d9a52ee466a9dbfc02/3b721/pipes-and-filters-load-balancing.png 192w,
/static/1e7fdbe8433418d9a52ee466a9dbfc02/66595/pipes-and-filters-load-balancing.png 384w,
/static/1e7fdbe8433418d9a52ee466a9dbfc02/fe486/pipes-and-filters-load-balancing.png 768w,
/static/1e7fdbe8433418d9a52ee466a9dbfc02/809bd/pipes-and-filters-load-balancing.png 821w" sizes="(max-width: 768px) 100vw, 768px" type="image/png">
          <img class="gatsby-resp-image-image" src="/static/1e7fdbe8433418d9a52ee466a9dbfc02/fe486/pipes-and-filters-load-balancing.png" alt="pipes and filters load balancing" title="pipes and filters load balancing" loading="lazy" decoding="async" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;">
        </picture>
  </a>
    </span></img></p>
<blockquote>
<p>위 그림을 보면 TASK A 필터와 TASK B 필터가 병렬구성되어 시스템 부하 및 처리량을 개선하고 있다.(파이프-필터 로드 밸런싱이라고 함)</p>
</blockquote>
<h3>3. NestJS에서 구현하기</h3>
<blockquote>
<p>파이프는 @Injectable() 데코레이터로 주석이 달린 클래스다. 파이프는 >PipeTransform 인터페이스를 구현해야 한다.</p>
</blockquote>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Injectable</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MyTestPipe</span> <span class="token keyword">implements</span> <span class="token class-name">PipeTransform</span> <span class="token punctuation">{</span>
  <span class="token function">transform</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//트랜스 폼의 반환 값이 파이프라인의 반환값</span>
    <span class="token comment">// task A 필터 처리.... task B 필터처리 => value 리턴</span>
    <span class="token keyword">return</span> value
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>위와 같이 파이프가 데이터를 받아서 값을 변환하거나, 유효성 검사하여 비즈니스 로직에 전달한다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Controller</span></span><span class="token punctuation">(</span><span class="token string">'/test'</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">testController</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> <span class="token keyword">readonly</span> testService<span class="token operator">:</span> TestService<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Get</span></span><span class="token punctuation">(</span><span class="token string">':id'</span><span class="token punctuation">)</span>
  <span class="token function">getOnetest</span><span class="token punctuation">(</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Param</span></span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">,</span> ParseIntPipe<span class="token punctuation">,</span> MyTestPipe<span class="token punctuation">)</span> id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>testService<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token comment">//TestService안에 대응하는 비즈니스로직함수 호출;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ParseIntPipe -> MyTestPipe 순서로 전달된다. ParseIntPipe는 Nest에서 기본적으로 제공하는 파이프인데, ParseIntPipe 포함 총 6가지가 있다.</p>
<h4>참고</h4>
<ul>
<li><a href="https://docs.nestjs.kr/pipes" target="_blank" rel="nofollow">[NestJS] 파이프 개요</a></li>
<li><a href="https://docs.microsoft.com/ko-kr/azure/architecture/patterns/pipes-and-filters" target="_blank" rel="nofollow">[MS DOCS] 파이프 및 필터 패턴</a></li>
</ul></div><style data-emotion="css hx9xpc">@media (max-width: 768px){.css-hx9xpc{padding:0 20px;}}</style><div class="css-hx9xpc egeogac0"></div><style data-emotion="css 9w9jmx">.css-9w9jmx{display:grid;place-items:center;margin-top:auto;padding:50px 0;font-size:15px;text-align:center;line-height:1.5;}@media (max-width: 768px){.css-9w9jmx{font-size:13px;}}</style><footer class="css-9w9jmx em9idp70">Thanks for visiting! have a nice day😎<br/>@ 2021 le2sky, Powered By Gatsby.</footer></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/post/211129/pipes-and-filters/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-4df07262952aec6aafa9.js"],"app":["/app-8b49bd8b852b57b72c6c.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-d5888277625bf3111538.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-8ba936e4d3ef8cfb0598.js"],"component---src-pages-info-tsx":["/component---src-pages-info-tsx-450fdad3437920db56eb.js"],"component---src-templates-post-template-tsx":["/component---src-templates-post-template-tsx-85872c364c0ae9140867.js"]};/*]]>*/</script><script src="/polyfill-4df07262952aec6aafa9.js" nomodule=""></script><script src="/component---src-templates-post-template-tsx-85872c364c0ae9140867.js" async=""></script><script src="/d0dcf9c1039535d44ee74defc829dfbf62dac3c5-fd0ef239f4294183c8d0.js" async=""></script><script src="/be649dec24c0af8239ea629002f7bb6d0ff320b3-fb50e8e5d3de781548ac.js" async=""></script><script src="/cb1608f2-3d819ef7bda07be68cd1.js" async=""></script><script src="/app-8b49bd8b852b57b72c6c.js" async=""></script><script src="/framework-58b14054e5856b4c6d2c.js" async=""></script><script src="/webpack-runtime-18ba49f24d528c3258f3.js" async=""></script></body></html>
---
date: '2021-11-28'
title: 'HTTP 프로토콜(1)'
categories: ['Backend', 'HTTP', 'Protocol']
summary: 'HTTP 프로토콜에 대해서 알아보자!'
thumbnail: './httpThumnail.png'
---

### 1. HTTP 란?

HTTP(하이퍼텍스트 전송 프로토콜)은 HTML과 같은 하이퍼미디어 문서를 전송하기 위한 **애플리케이션 레이어** 프로토콜이다.
애플리케이션 레이어는 추후 OSI7 계층 내용에서 다루도록 하겠다. <u>**_더욱 쉽게 풀어서 이야기 하자면 HTTP는 HTML 문서와 같은 리소스들을 가져올 수 있도록
해주는 프로토콜이다._**</u>
<br><br>
**HTTP는 웹에서 이루어지는 모든 데이터 교환의 기초** 이며, 클라이언트-서버 프로토콜이기도 하다. 클라이언트-서버 프로토콜이란 수신자 측에
의해 Request가 초기화되는 프로토콜을 의미한다. 하나의 완전한 문서는 텍스트, 레이아웃 설명, 이미지, 스크립트 등 불러온 하위 문서들로 재구성 된다.

<img src="./HTTP-01.png"></img>

> 아 네. 그렇군요 근데 프로토콜은 뭐죠..?

### 2. 프로토콜

프로토콜은 컴퓨터 내부에서, 또는 컴퓨터 사이에서 데이터의 교환 방식을 정의하는 규칙 체계이다. 예를 들자면 서울에 있는 사람과 부산에 있는 사람이 소통하기 위해서
한국어 체계라는 프로토콜을 쓰는 것이다. <b>즉, 프로토콜은 데이터 교환에 있어서 서로의 규격을 맞추기 위한 국룰인 것이다</b>. 국룰에 따르지 않는다면 의사소통이 힘들 것이다.
앞으로도 네트워크를 다룰 때 프로토콜이라는 단어가 자주 등장할 것이다.
<br>
<br>
HTTP는 1990년 초에 설계되어 계속해서 진화한 확장 가능한 프로토콜이다. HTTP는 신뢰 가능한 전송 프로토콜이라면 이론상으로 무엇이든 사용할 수 있으나 TCP 혹은 암호화된
TCP 연결인 TLS를 통해 전송된다. HTTP의 확장성 덕분에 오늘날 하이퍼텍스트 문서 뿐 아닌, 이미지, 비디오, HTML 폼 결과와 같은 내용을 서버로 POST 요청할때 사용되기도 한다.

### 3. HTTP 특징

- HTTP는 사람이 읽을 수 있으며 간단하게 설계되었다.
- HTTP는 확장 가능하다. HTTP 헤더는 HTTP를 확장하고 실험하기 쉽게 만든다. 클라이언트와 서버가 새로운 헤더의 시맨틱에 대해 합의만 하면 언제나 새로운 기능을 추가 가능하다.
- HTTP는 상태를 저장하지 않는다.(Stateless) 동일한 연결 상에서 연속하여 전달된 두 개의 요청 사이에는 연결고리가 없다.
- HTTP는 상태는 없지만, HTTP 쿠키는 상태가 있는 세션을 만들도록 해준다. 헤더 확장성을 사용하여, 동일한 컨텍스트 또는 동일한 상태를 공유하기 위해 각 요청들에 세션을 만들도록 HTTP쿠키가 추가된다.
- HTTP는 연결될 수 있도록 하는 근본적인 전송 프로토콜을 요구하지 않는다. 다만 그저 신뢰할 수 있거나 메시지 손실이 없는 연결을 요구할 뿐이다.
- HTTP는 연결이 필수는 아니지만 연결 기반인 신뢰할 수 있는 전송 프로토콜인 TCP 표준에 의존한다.

### 4. HTTP 흐름

**1. TCP 연결을 연다.** TCP 연결은 요청을 보내거나 응답을 받는데 사용된다. 클라이언트는 새 연결을 열거나, 기존 연결을 재사용하거나, 서버에 대한 여러 TCP 연결이 가능하다.
<br><br>

**2. HTTP 메시지를 전송한다.**

```http
GET / HTTP/1.1
Host: developer.mozilla.org
Accept-Language: fr
```

**3. 서버에 의해 전송된 응답을 읽는다.**

```http
HTTP/1.1 200 OK
Date: Sat, 09 Oct 2010 14:28:02 GMT
Server: Apache
Last-Modified: Tue, 01 Dec 2009 20:18:22 GMT
ETag: "51142bc1-7449-479b075b2891b"
Accept-Ranges: bytes
Content-Length: 29769
Content-Type: text/html
<!DOCTYPE html... (here comes the 29769 bytes of the requested web page)
```

**4. 연결을 닫거나 다른 요청들을 위해 재사용한다.**

### 5. HTTP 로 제어 가능한 사항

**1. HTTP로 문서가 캐시되는 방식을 제어:**<br>
서버는 캐시 대상과 기간을 프록시와 클라이언트에 지시할 수 있다.
<br><br>

> 실제로 브라우저와 서버의 요청 과정 사이에는 좀 더 많은 컴퓨터들이 존재한다.
> 라우터, 모뎀등이 있으며, 서버와 클라이언트 사이에 중계기로
> 대리로 통신을 수행하는 것을 프록시라고 한다.

<br>

**2. Origin 제약사항 완화하기**: <br>
스누핑과 다른 프라이버시 침해를 막기 위해, 브라우저는 웹 사이트 간의 엄격한 분리를 강제한다. 이걸 동일 출처 정책(Same Origin Policy) 정책이라고 부른다.
예를 들어 'https://le2sky.github.io' 에서 받은 페이지가 'https://naver.com' 에서 받아온 페이지 상의 정보에 접근해 중요한 개인정보를 훔치는 걸 막을 수 있다.
만약 두 페이지가 데이터를 교환하려면, 서로 동의해야한다. 동일 출처 정책은 서버에 부담을 준다. 하지만 HTTP 헤더를 통해 이것을 완화 할 수 있다.
<br>
<br>

**3. 인증**: <br>
어떤 페이지들은 보호되어 오로지 특정 사용자만이 그 페이지에 접근할 수 있다. '쿠팡' 사이트의 '내 장바구니'가 이러한 케이스이다. 여기에 접근하기 위해서는
기본 인증이 필요하다. 인증은 WWW-Authenticate 또는 유사한 인증 헤더를 사용하거나, HTTP 쿠키를 사용해 특정 세션을 설정하면 된다.
<br>
<br>

**4. 세션**: <br>
쿠키 사용은 서버 상태를 요청과 연결하도록 한다. HTTP 프로토콜은 Stateless 하지만 HTTP 쿠키를 사용해서 세션을 만들 수 있다.

<br>

#### 참고

- [MDN 개발자를 위한 웹 기술-HTTP](https://developer.mozilla.org/ko/docs/Web/HTTP/Overview)
